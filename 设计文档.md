这是为您整理的 **Nexus** 项目最终版产品定义文档。你可以直接将其作为 GitHub 的 `README.md`，或者作为你开发过程中的需求说明书（PRD）。

---

# Project Nexus: 分布式配置指挥舱

**Distributed Configuration Command Center**

> **Slogan**: Your digital second brain, synced in silence.
> **中文标语**: 你的数字第二大脑，静默同步，全屏掌控。

## 1. 项目愿景 (Vision)

Nexus 旨在解决开发者在多设备（家庭/公司）切换时，**配置碎片化**与**隐私安全**之间的矛盾。
它是一个基于浏览器扩展的**全屏单页应用 (SPA)**，利用 GitHub Private Gist 作为加密后端，提供一个安全、沉浸、结构化的“配置管理中心”。它不仅是剪贴板，更是你个人的云端知识库。

---

## 2. 核心交互形态 (Form Factor)

* **载体**：Chrome / Edge 浏览器扩展 (Manifest V3)。
* **入口**：点击浏览器右上角图标，或使用全局快捷键 (`Alt+X`)。
* **展现**：**全屏新标签页 (New Tab)** 或 **独立应用窗口**。摒弃狭窄的侧边栏，利用完整的屏幕空间展示复杂代码与配置。
* **布局**：经典的**三栏式指挥舱布局**（目录树 -> 列表索引 -> 沉浸编辑器）。

---

## 3. 功能特性 (Feature Specifications)

### 3.1 🛡️ 私有保险箱 (The Private Vault)

* **去中心化存储**：无任何第三方服务器。所有数据直接托管于 **GitHub Private Gist**。
* **零信任架构**：应用仅在本地运行，GitHub Token (PAT) 仅加密存储于本地浏览器 (`chrome.storage.local`)，绝不上传。
* **数据主权**：即使 Nexus 停止维护，你的数据依然完整地躺在你的 GitHub 账号里，随时可导出。

### 3.2 🖥️ 沉浸式编辑器 (Integrated Monaco Editor)

专为开发者打造的编辑体验，而非简单的文本框：

* **语法高亮**：原生支持 YAML (Clash规则), JSON (配置), Markdown (笔记), Python/JS (脚本)。
* **智能辅助**：具备代码折叠、行号显示、缩进参考线。
* **只读/编辑模式切换**：防止误触修改核心配置。

### 3.3 🗂️ 结构化分类体系 (Visual Taxonomy)

针对海量文本信息，提供多维度的分类管理：

* **Clash 规则集**：专门优化的 YAML 阅读视图，支持一键复制整段配置。
* **AI 提示词 (Prompts)**：卡片式展示，支持标签过滤（如 `#Vue重构`, `#文档润色`），支持变量占位符高亮。
* **环境区分**：支持为条目打上“🏠 Home”或“🏢 Work”标签，视觉上快速区分不同环境的配置。

### 3.4 ⚡ 神经搜索 (Neural Search)

* **前端模糊搜索**：基于 Fuse.js。即使记不清文件名，只需输入关键词（如 "代理"、"Vue"、"翻译"），即可在毫秒级内从数千条配置中定位目标。
* **全键盘操作**：支持 `Ctrl/Cmd + P` 呼出搜索框，上下键选择，回车进入，全程无需鼠标。

### 3.5 🔄 智能增量同步 (Smart Sync)

* **冷热分离加载**：启动时仅加载轻量级的“索引文件 (`index.json`)”，实现秒开。点击具体条目时再按需获取大体积内容。
* **版本历史**：利用 Gist 原生的 Revision History，如果误删了配置，可直接通过链接回滚到昨天版本。

---

## 4. 技术栈架构 (Tech Stack)

<!-- 注意！！！这是我的默认技术栈，如果有更合适的，请直接替换更改 -->

| 模块 | 技术选型 | 理由 |
| --- | --- | --- |
| **Core** | **Vue 3 + Vite** | 你的主力技术栈，开发效率高，响应式性能好。 |
| **UI Framework** | **Naive UI** (或 Element Plus) | 提供成熟的深色模式、Tree 组件和布局系统。 |
| **Extension** | **CRXJS (Vite Plugin)** | 现代化的 Chrome 扩展开发流，支持 HMR 热更新。 |
| **Editor** | **Monaco Editor** | VS Code 同款内核，处理代码/配置的最佳选择。 |
| **State** | **Pinia** | 管理应用状态（当前选中的分类、缓存的内容）。 |
| **Network** | **Octokit (GitHub SDK)** | 官方 SDK，优雅处理 Gist API 请求与鉴权。 |
| **Search** | **Fuse.js** | 轻量级、高性能的前端模糊搜索库。 |

---

## 5. 数据结构设计 (Gist Schema)

为了保证性能与扩展性，采用**索引与内容分离**的存储策略：

**文件 1: `nexus_index.json` (核心索引)**

```json
{
  "updated_at": 1705830000,
  "categories": [
    {
      "id": "net-rules",
      "name": "Clash 规则",
      "icon": "router",
      "items": [
        { "id": "home-yaml", "title": "家庭全量配置", "gist_file": "home.yaml", "tags": ["home"] },
        { "id": "work-yaml", "title": "公司分流配置", "gist_file": "work.yaml", "tags": ["work"] }
      ]
    },
    {
      "id": "ai-prompts",
      "name": "AI 提示词",
      "icon": "smart_toy",
      "items": [ ... ]
    }
  ]
}

```

**文件 2~N: 内容文件**

* `home.yaml` (实际的大段 Clash 内容)
* `work.yaml`
* `vue_refactor_prompt.md`

---

## 6. 用户旅程 (User Journey)

1. **初次安装**：
* 在 Chrome 安装 Nexus 扩展。
* 输入 GitHub Personal Access Token (PAT)。
* Nexus 自动检测是否有历史 Gist，如果没有则初始化一个新的。


2. **日常使用（公司）**：
* 按下 `Alt+X`，全屏打开 Nexus。
* 搜索 "Clash"，点击 "公司分流配置"。
* 界面右侧展示代码高亮的 YAML。
* 点击右上角巨大的「复制」按钮。
* 粘贴到 Clash 软件中。


3. **日常记录（家里）**：
* 发现一个新的好用的 AI Prompt。
* 打开 Nexus -> AI 分类 -> 新建条目。
* 粘贴内容，保存。
* Nexus 后台静默调用 API 将更新推送到 GitHub。
* 第二天到公司，数据已同步。

